#!/bin/bash
set -e

VENV_DIR="/usr/share/fim-daemon/venv"

case "$1" in
    purge)
        echo "Purging FIM daemon configuration and data..."
        
        # Remove configuration files
        rm -rf /etc/fim-daemon
        
        # Remove log files
        rm -rf /var/log/fim-daemon
        
        # Remove data files
        rm -rf /var/lib/fim-daemon
        
        # Remove virtual environment
        rm -rf "$VENV_DIR"
        
        # Remove runtime directory
        rm -rf /var/run/fim-daemon
        
        echo "FIM daemon purge complete."
        ;;
        
    remove|upgrade|failed-upgrade|abort-install|abort-upgrade|disappear)
        # Normal removal/upgrade - keep config and data
        ;;
        
    *)
        echo "postrm called with unknown argument \`$1'" >&2
        exit 1
        ;;
esac

exit 0